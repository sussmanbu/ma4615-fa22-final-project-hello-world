---
title: Post 2 - Data Loading and Cleaning
author: Guanchen Xiao, Fangzhou Cheng, Zehao Zhou, Yuke Li, Xuzhan Tan
date: '2022-10-21'
slug: []
categories: []
tags: []
description: ~
toc: yes
authors: []
series: []
lastmod: '2022-10-21T09:37:04-04:00'
featuredVideo: ~
featuredImage: ~
---


<div id="TOC">

</div>

<div id="data-loading-and-cleaning" class="section level2">
<h2>Data Loading and Cleaning</h2>
<p>We decided to focus on the first dataset, Medicare Inpatient Hospitals by Provider and Service. The size of our dataset is smaller than 50 mb so we included Medicare_Data.csv file in the dataset folder. We loaded the data using read_csv and cleaned the data by removing rows with missing values. We also removed columns with meaningless information for our analysis.</p>
<pre class="r"><code>library(tidyverse)</code></pre>
<pre><code>## ── Attaching packages ─────────────────────────────────────── tidyverse 1.3.2 ──
## ✔ ggplot2 3.3.6      ✔ purrr   0.3.4 
## ✔ tibble  3.1.8      ✔ dplyr   1.0.10
## ✔ tidyr   1.2.0      ✔ stringr 1.4.1 
## ✔ readr   2.1.2      ✔ forcats 0.5.2 
## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
## ✖ dplyr::filter() masks stats::filter()
## ✖ dplyr::lag()    masks stats::lag()</code></pre>
<pre class="r"><code>##Remove dollar signs to make data available
medicare_data &lt;- read_csv(here::here(&quot;dataset&quot;, &quot;Medicare_Data.csv&quot;) , 
col_types = cols( Avg_Mdcr_Pymt_Amt=col_number(), Avg_Tot_Pymt_Amt=col_number(), Avg_Submtd_Cvrd_Chrg=col_number()))
 
## CLEAN the data
medicare_data_clean &lt;- medicare_data %&gt;% 
##Remove missing values
filter(!grepl(&#39;Unknown&#39;, medicare_data$Rndrng_Prvdr_RUCA_Desc)) %&gt;%
##Remove NA 
   drop_na() %&gt;%      
##Remove useless columns
select(-Rndrng_Prvdr_CCN, -Rndrng_Prvdr_St, -Rndrng_Prvdr_State_FIPS, -Rndrng_Prvdr_Zip5, -Rndrng_Prvdr_RUCA_Desc)
 
write_csv(medicare_data_clean, file = here::here(&quot;dataset&quot;, &quot;Medicare_Data_clean.csv&quot;))
save(medicare_data_clean, file = here::here(&quot;dataset/Medicare_Data.RData&quot;))</code></pre>
</div>
<div id="exploratory-data-analysis" class="section level2">
<h2>Exploratory Data Analysis</h2>
<p>We calculate the mean of discharge, covered, total payment, and medicare payment based on state.</p>
<pre class="r"><code>medicare_data_sum &lt;- medicare_data_clean %&gt;%
  group_by(Rndrng_Prvdr_State_Abrvtn) %&gt;%
  summarize(Mean_Discharge = mean(Tot_Dschrgs), Mean_Covered = mean(Avg_Submtd_Cvrd_Chrg), Mean_Total_Payment = mean(Avg_Tot_Pymt_Amt), Mean_Medicare_Payment = mean(Avg_Mdcr_Pymt_Amt)) </code></pre>
<div id="plot-1" class="section level3">
<h3>Plot 1</h3>
<p><strong>The relationship between Average Medicare Payments and Average Total Payments</strong></p>
<pre class="r"><code>ggplot(medicare_data_sum) + geom_point(aes(Mean_Total_Payment, Mean_Medicare_Payment))</code></pre>
<p><img src="{{< blogdown/postref >}}index.en_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<p>The Medicare covered payment increases as the total payment increases. This makes sense because Medicare covers payment mostly by a certain percentage, but may vary depending on differences in hospital charge structures.</p>
</div>
<div id="plot-2" class="section level3">
<h3>Plot 2</h3>
<p><strong>The ratio of total payment and covered for each state</strong></p>
<pre class="r"><code>medicare_data_sum %&gt;% ggplot() + geom_point(aes(x = reorder(Rndrng_Prvdr_State_Abrvtn, Mean_Total_Payment/Mean_Covered), y = Mean_Total_Payment/Mean_Covered)) + scale_x_discrete(guide = guide_axis(n.dodge = 2)) + labs(x = &quot;State&quot;)</code></pre>
<p><img src="{{< blogdown/postref >}}index.en_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<p>Maryland is an outlier because it is the only state where hospitals are accountable for the health of their communities.</p>
</div>
<div id="plot-3" class="section level3">
<h3>Plot 3</h3>
<p><strong>The ratio of medicare payment and total payment for each state</strong></p>
<pre class="r"><code>medicare_data_sum %&gt;%
 group_by(Rndrng_Prvdr_State_Abrvtn) %&gt;%
mutate(percent_payment=Mean_Medicare_Payment/Mean_Total_Payment)%&gt;%
    ggplot() +
    geom_point(aes(y = percent_payment, x = reorder(Rndrng_Prvdr_State_Abrvtn,percent_payment)))+ 
    scale_x_discrete(guide = guide_axis(n.dodge=2))+labs(x=&#39;State&#39;,y=&#39;Percent of Medicare payment of total payment&#39;)</code></pre>
<p><img src="{{< blogdown/postref >}}index.en_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<p>Washington DC and Hawaii have the lowest ratio of medical payment and total payment while South Dakota and Maryland have the highest ratio. From the above graph that describes the percentage the Medicare payment in the total payment, it’s quite clear that there’s a standard of 85% that can be found within all the states in the U.S. However, it’s quite surprising to find that there are almost half of the states do not fulfill this standard. To be more specific, it means the residents of these states have to afford 15-25% of the total payment even if they have medicare covered. Also, there are states that covered more than 90% of the payment which means the person only has to afford less than 10% of the total payment. The disparity is visually huge among all the states and it is something that could be further analyzed to see if there’s a need to improve the Medicare system in each state.</p>
</div>
</div>
